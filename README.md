# test_task_ROIburo (Михаил Соловьев)

(Пишу на русском, чтобы было легче читать.)

Тестовое задание написано с применением гексогональной архитектуры, как никогда подходящей для FastAPI и удобного
расширения приложения. Приложение спишком мало для написания тестов, поэтому тестовые данные загружены при запуске и доступны для запроса.

## Стэк
- `Python 3.11`;
- `FastAPI`;
- `Pydantic`;
- `Tortoise ORM`;
- `SQLite and PostgreSQL` (`aiosql` and `asyncpg` for async orm);
- `Docker`;

## Информация для запуска
- рабочая директория - корневая;
- переменные окружения и важные переменные в .env файлах;


## Структура
- app: директория FastAPI-приложения;
  - api: пакеты API (конроллеры и DI);
  - core: настройки и события;
  - data: датасеты для тестовой БД;
  - models: модели ORM сущностей БД (включая абстрактные);
  - schemas: модели данных ответов и запросов;
  - service: вспомогательные модули;
- ...различные файлы-конфигурации для питона и докера;


## Запуск локально
Елси хотите  обойтись без докера, можно запустить приложения локально:
```commandline
pip install -r requirements.txt
uvicorn app.main:create_app --reload
```
В такой случае будет использована БД SQLite.


## Запуск в докере
При запуске докер контейнера, будет исполтьзована БД PostgreSQL из изображения:
```commandline
docker-compose up -d --build
```


## Эндоинты:
- GET /docs - документация;
- GET /api/v1/ - эндпоинт-healthcheck;
- GET /api/v1/city - получения списка городов;
- GET /api/v1/city/{city_id}/street - получения списква улиц по городу;
- POST /api/v1/shop - создание магазина;
- GET /api/v1/shop?street=&city=&open=0/1 - получения списка магазина по фильтрам, причем в street и city передаются названия, а не id, так удобнее, но это непринципиально;
